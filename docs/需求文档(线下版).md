
# 需求文档 (for 线下版)

> version: 1.0

## TODO List

### 1 欢迎界面

`/home`

1. 有跳转到 积分榜|创建房间|加入游戏 的链接

### 2 积分榜

`/topPlayers`

1. 根据 api 文档, **显示排名前7的玩家**, 按胜场降序

### 3 创建房间界面

`/god/admin`

1. 有选择人数的拖动条
2. 根据选择人数显示角色配置(狼人\*2, 村民\*1, 预言家\*1这样的)
3. 有提交按钮, 根据api向后端发送请求创建房间
4. 获得后端返回的**上帝token**, 暂时保存
5. 获得房间号, 生成**分享房间链接**`/player/login?room=<room id>`
6. 显示进入游戏的按钮, 跳转到`/god/game?token=<token>&room=<room id>`

人数对应的角色配置：
| 总人数 | 狼人 | 预言家 | 女巫 | 猎人 | 守卫 | 白痴 | 平民 | 上帝 |
| :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: |
| 7 | 2 | 1 | 0 | 0 | 0 | 0 | 3 | 1 |
| 8 | 3 | 1 | 1 | 0 | 0 | 0 | 2 | 1 |
| 9 | 3 | 1 | 1 | 0 | 0 | 0 | 3 | 1 |
| 10 | 3 | 1 | 1 | 1 | 0 | 0 | 3 | 1 |
| 11 | 4 | 1 | 1 | 1 | 1 | 0 | 2 | 1 |
| 12 | 4 | 1 | 1 | 1 | 1 | 0 | 3 | 1 |
| 13 | 4 | 1 | 1 | 1 | 1 | 0 | 4 | 1 |
| 14 | 5 | 1 | 1 | 1 | 1 | 1 | 3 | 1 |
| 15 | 5 | 1 | 1 | 1 | 1 | 1 | 4 | 1 |

### 4 上帝观战界面

`/god/game?token=<token>&room=<room id>`

1. 点击刷新, 根据api向后端发送游戏状态请求, 获取所有成员状态
2. 将状态展现到界面
3. 可以设置每个玩家 被杀|成为警长|失去警徽|... , **确认后**发送api请求
4. 有按钮向后端发送请求, 结束游戏

### 5 玩家登录界面

`/player/login?room=<room id>`

1. 有**玩家名字, 房间号**的输入框, 提交进入游戏的按钮
2. 有**玩法说明按钮**, 显示一个提示弹窗, 按关闭按钮收回弹窗
3. 根据url中*可能有*的room id自动输入房间号
4. 获得后端的返回数据后, 显示分配到角色和简短的游戏提示(比如 "你的身份是狼人, 隐藏自己, 吃掉所有村民!"之类的), 确认后跳转到`/player?token=<token>&room=<room id>`界面

### 6 主要游戏界面

`/player?token=<token>&room=<room id>`

1. 根据 api, **点击刷新**当前游戏状态
2. 根据查询结果, 展示**所有玩家**的 名字|生死状态|是否为警长
3. 显示**自己**的 职业|生死状态|是否为警长|名字
4. 根据白天|黑夜改变颜色(白底黑字|黑底白字), 有可能的话实现昼夜交替的特效
5. 游戏开始时是第 0 天晚上
6. 当数据中"time"为"gameOver"时跳转到`/result?room=<room id>`界面, 进行结果清算

### 7 游戏结果展示界面

`/result?room=<room id>`

1. 根据 api 向后端发送请求, 获得游戏结果
2. 显示获胜方
3. 根据**获胜方**和**身份是否为狼人**显示胜利标志和失败标志
4. 显示每个玩家的 身份|死亡时间(或"存活")|胜场
5. 显示**积分榜**按钮, **返回主页**按钮和**再来一局**按钮

## 分工

待定

## 注意事项

1. 注意拆分组件, 根据 vue 官方文档, 组件命名规范应该是`<父组件名><子组件项目>`, 首字母大写, 统一置于components目录下. 详见[官方文档](https://cn.vuejs.org/v2/style-guide/#%E7%B4%A7%E5%AF%86%E8%80%A6%E5%90%88%E7%9A%84%E7%BB%84%E4%BB%B6%E5%90%8D%E5%BC%BA%E7%83%88%E6%8E%A8%E8%8D%90)
2. 先用按照api文档的数据格式, 用假数据代替, 要查询时直接返回假数据, 等搭好了后端再改成发送网络请求